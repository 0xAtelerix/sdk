// Code generated by cmd/cgo; DO NOT EDIT.

//line /Users/ai/go/pkg/mod/github.com/erigontech/mdbx-go@v0.27.14/mdbx/error.go:1:1
package mdbx

/*
#include <stdlib.h>
#include <stdio.h>
#include "mdbxgo.h"
*/
import _ "unsafe"

import (
	"os"
	"syscall"
)

// OpError is an error returned by the C API.  Not all errors returned by
// lmdb-go have type OpError but typically they do.  The Errno field will
// either have type Errno or syscall.Errno.
type OpError struct {
	Errno error
	Op    string
}

// Error implements the error interface.
func (err *OpError) Error() string {
	return err.Op + ": " + err.Errno.Error()
}

// Errno is an error type that represents the (unique) errno values defined by
// LMDB.  Other errno values (such as EINVAL) are represented with type
// syscall.Errno.  On Windows, LMDB return codes are translated into portable
// syscall.Errno constants (e.g. syscall.EINVAL, syscall.EACCES, etc.).
//
// Most often helper functions such as IsNotFound may be used instead of
// dealing with Errno values directly.
//
//		lmdb.IsNotFound(err)
//		lmdb.IsErrno(err, lmdb.TxnFull)
//		lmdb.IsErrnoSys(err, syscall.EINVAL)
//		lmdb.IsErrnoFn(err, os.IsPermission)
type Errno  /*line :40:12*/_Ctype_int /*line :40:17*/

// The most common error codes do not need to be handled explicity.  Errors can
// be checked through helper functions IsNotFound, IsMapFull, etc, Otherwise
// they should be checked using the IsErrno function instead of direct
// comparison because they will typically be wrapped with an OpError.
const (
	// Error codes defined by LMDB.  See the list of LMDB return codes for more
	// information about each
	//
	//		http://symas.com/mdb/doc/group__errors.html

	KeyExist        Errno = ( /*line :52:26*/_Ciconst_MDBX_KEYEXIST /*line :52:40*/)
	NotFound        Errno = ( /*line :53:26*/_Ciconst_MDBX_NOTFOUND /*line :53:40*/)
	PageNotFound    Errno = ( /*line :54:26*/_Ciconst_MDBX_PAGE_NOTFOUND /*line :54:45*/)
	Corrupted       Errno = ( /*line :55:26*/_Ciconst_MDBX_CORRUPTED /*line :55:41*/)
	Panic           Errno = ( /*line :56:26*/_Ciconst_MDBX_PANIC /*line :56:37*/)
	VersionMismatch Errno = ( /*line :57:26*/_Ciconst_MDBX_VERSION_MISMATCH /*line :57:48*/)
	Invalid         Errno = ( /*line :58:26*/_Ciconst_MDBX_INVALID /*line :58:39*/)
	MapFull         Errno = ( /*line :59:26*/_Ciconst_MDBX_MAP_FULL /*line :59:40*/)
	DBsFull         Errno = ( /*line :60:26*/_Ciconst_MDBX_DBS_FULL /*line :60:40*/)
	ReadersFull     Errno = ( /*line :61:26*/_Ciconst_MDBX_READERS_FULL /*line :61:44*/)
	TxnFull         Errno = ( /*line :62:26*/_Ciconst_MDBX_TXN_FULL /*line :62:40*/)
	CursorFull      Errno = ( /*line :63:26*/_Ciconst_MDBX_CURSOR_FULL /*line :63:43*/)
	PageFull        Errno = ( /*line :64:26*/_Ciconst_MDBX_PAGE_FULL /*line :64:41*/)
	Incompatible    Errno = ( /*line :65:26*/_Ciconst_MDBX_INCOMPATIBLE /*line :65:44*/)
	BadRSlot        Errno = ( /*line :66:26*/_Ciconst_MDBX_BAD_RSLOT /*line :66:41*/)
	BadTxn          Errno = ( /*line :67:26*/_Ciconst_MDBX_BAD_TXN /*line :67:39*/)
	BadValSize      Errno = ( /*line :68:26*/_Ciconst_MDBX_BAD_VALSIZE /*line :68:43*/)
	BadDBI          Errno = ( /*line :69:26*/_Ciconst_MDBX_BAD_DBI /*line :69:39*/)
	Perm            Errno = ( /*line :70:26*/_Ciconst_MDBX_EPERM /*line :70:37*/)
	//TLSFull       Errno = C.MDBX_TLS_FULL
	//MapResized    Errno = C.MDBX_MAP_RESIZED
)

// minimum and maximum values produced for the Errno type. syscall.Errnos of
// other values may still be produced.
const minErrno, maxErrno  /*line :77:26*/_Ctype_int /*line :77:31*/ = ( /*line :77:34*/_Ciconst_MDBX_KEYEXIST /*line :77:48*/), ( /*line :77:51*/_Ciconst_MDBX_LAST_ADDED_ERRCODE /*line :77:75*/)

// App can re-define this messages from init() func
var CorruptErrorHardwareRecommendations = "Maybe free space is over on disk. Otherwise it's hardware failure. Before creating issue please use tools like https://www.memtest86.com to test RAM and tools like https://www.smartmontools.org to test Disk. To handle hardware risks: use ECC RAM, use RAID of disks, run multiple application instances (or do backups). If hardware checks passed - check FS settings - 'fsync' and 'flock' must be enabled. "
var CorruptErrorBacktraceRecommendations = "Otherwise - please create issue in Application repo." // with backtrace or coredump. To create coredump set compile option 'MDBX_FORCE_ASSERTIONS=1' and env variable 'GOTRACEBACK=crash'."
var CorruptErrorRecoveryRecommendations = "On default DURABLE mode, power outage can't cause this error. On other modes - power outage may break last transaction and mdbx_chk can recover db in this case, see '-t' and '-0|1|2' options."
var CorruptErrorMessage = CorruptErrorHardwareRecommendations + " " + CorruptErrorBacktraceRecommendations + " " + CorruptErrorRecoveryRecommendations

func (e Errno) Error() string {
	if e == Corrupted {
		return "MDBX_CORRUPTED: " + CorruptErrorMessage
	} else if e == Panic {
		return "MDBX_PANIC: " + CorruptErrorMessage
	}
	return ( /*line :91:9*/_Cfunc_GoString /*line :91:18*/)(( /*line :91:20*/_Cfunc_mdbx_strerror /*line :91:34*/)( /*line :91:36*/_Ctype_int /*line :91:41*/(e)))
}

// _operrno is for use by tests that can't import C
func _operrno(op string, ret int) error {
	return operrno(op,  /*line :96:21*/_Ctype_int /*line :96:26*/(ret))
}

// IsNotFound returns true if the key requested in Txn.Get or Cursor.Get does
// not exist or if the Cursor reached the end of the database without locating
// a value (EOF).
func IsNotFound(err error) bool {
	return IsErrno(err, NotFound)
}

func IsKeyExists(err error) bool {
	return IsErrno(err, KeyExist)
}

// IsNotExist returns true the path passed to the Env.Open method does not
// exist.
func IsNotExist(err error) bool {
	return IsErrnoFn(err, os.IsNotExist)
}

// IsMapFull returns true if the environment map size has been reached.
func IsMapFull(err error) bool {
	return IsErrno(err, MapFull)
}

// IsMapResized returns true if the environment has grown too large for the
// current map after being resized by another process.
//func IsMapResized(err error) bool {
//	return IsErrno(err, MapResized)
//}

// IsErrno returns true if err's errno is the given errno.
func IsErrno(err error, errno Errno) bool {
	return IsErrnoFn(err, func(err error) bool { return err == errno }) //nolint:goerr113
}

// IsErrnoSys returns true if err's errno is the given errno.
func IsErrnoSys(err error, errno syscall.Errno) bool {
	return IsErrnoFn(err, func(err error) bool { return err == errno }) //nolint:goerr113
}

// IsErrnoFn calls fn on the error underlying err and returns the result.  If
// err is an *OpError then err.Errno is passed to fn.  Otherwise err is passed
// directly to fn.
func IsErrnoFn(err error, fn func(error) bool) bool {
	if err == nil {
		return false
	}
	if err, ok := err.(*OpError); ok {
		return fn(err.Errno)
	}
	return fn(err)
}
